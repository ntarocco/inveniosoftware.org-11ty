{% assign navPages = collections.all | eleventyNavigation %}
<header class="header-nav">
  <nav class="navbar navbar-fixed-top invenio-navbar">
    <div class="container">
      <!-- Brand and toggle get grouped for better mobile display -->
      <div class="navbar-header">
        <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#inv-navbar-collapse" aria-controls="inv-navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a href="/" class="navbar-brand">
          <img src="/assets/images/logo-invenio-white.svg" alt="Invenio logo" title="Invenio logo" class="icon-contact" />
        </a>
      </div>
      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse navbar-collapse" id="inv-navbar-collapse">
        <ul class="nav navbar-nav navbar-right">
          {%- for entry in navPages %}
          {% if entry.children.size > 0 %}
          <li class="dropdown-submenu">
            <a href="#" class="dropdown-toggle{% if entry.url == page.url or entry.key == eleventyNavigation.parent %} active-menu{% endif %}" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
              <span class="nav-label">{{ entry.title }}</span>
              <span class="caret"></span>
            </a>
            <ul class="dropdown-menu">
              {% for child in entry.children %}
                <li><a href="{{ child.url }}">{{ child.title }}</a></li>
              {% endfor %}
            </ul>
          </li>
          {% else %}
          {% assign isBlogPost = entry.key == "Blog" and page.url startswith "/blog/" %}
          <li><a{% if entry.url == page.url or entry.key == eleventyNavigation.parent or isBlogPost %} class="active-menu"{% endif %} href="{{ entry.url }}">{{ entry.title }}</a></li>
          {% endif %}
          {%- endfor %}
        </ul>
      </div>
    </div>
  </nav>
</header>
